<!DOCTYPE>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="target-densitydpi=get-target-densitydpi, width=device-width, initial-scale=1, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="format-detection" content="telephone=no">
<meta http-equiv="Expires" CONTENT="-1">
<meta http-equiv="Cache-Control" CONTENT="no-cache">
<meta http-equiv="Pragma" CONTENT="no-cache">
<link href="css/ectouch.css" rel="stylesheet" type="text/css" />
<link href="css/style.css" rel="stylesheet" type="text/css" />
<link href="css/font-awesome.min.css" rel="stylesheet"   type="text/css"/>
<link href="fonts/iconfont.css" rel="stylesheet" type="text/css" />
<script src="js/TouchSlide.1.1.source.js" type="text/javascript"></script>
<script src="js/jquery-1.8.2.min.js" type="text/javascript"></script>
<script src="js/common_js.js" type="text/javascript"></script>
<script src="js/jquery.reveal.js" type="text/javascript"></script>
<script src="layer/layer.js" type="text/javascript"></script>
<title>忘记密码</title>
</head>

<body>
<div class="Layout_style">
 <header id="header">
  <div class="header_l header_return"><a  href="javascript:;"onClick="javascript :history.back(-1);" class="iconfont icon-turn-left"></a></div>
  <h1>忘记密码 </h1>
  <div class="header_r">
  <a class="iconfont icon-home" href="home.html"></a> </div> 
</header>
 <!--忘记密码-->
 <div class="user_style">
   <div class="Forgot_Password" id="Forgot_pass">
        <div class="hd">
         <ul><li>手机找回</li><li>邮箱找回</li></ul>
        </div>
        <div class="bd" id="order-bd">
         <div class="con">
         <ul class="list">
           <li>
             <div class="verification_box">
              <input id="userCode" name="userCode" value="" onFocus="phoneClick(this)" onBlur="pcheck(this)" type="text"><button class="button" id="verif_btn">验证手机</button>
             </div>
             <div class="Codes_Enter">
                <div class="Codes_style">
                <input id="Codes" name="Codestext" value="" onFocus="CodesClick(this)" onBlur="Codes(this)" type="text"><button class="button" id="Next_btn">下一步</button> 
                 </div>  
                 <button class="send_btn" type="button">再次发送</button>
                 <button class="send_btns" type="button" id="zc_send_btn">60s后再次发送验证码</button>
             </div>
             <!--修改密码-->
              <div class="change_Password">
                 <ul>
                  <li class="Password_k"><input name="新密码"  value="" type="password" placeholder="新密码" class="passwordtext" id="Nes_pas"></li>
                  <li class="Password_k"><input name="确认密码"  value=""  type="password" placeholder="确认密码" class="passwordtext" id="c_mew_pas"></li>
                  <li style="text-align:center"><button class="btn modify_btn" type="button" id="modify_btn">确认修改</button></li>
                 </ul>
              </div>
             </li>
         </ul>
          </div>
          <div class="con">
         <ul class="list">
             <li>
             <div class="email_box">
              <input id="email" name="userCode" value="" onFocus="phoneClick(this)" onBlur="pcheck(this)" type="text"><button class="button" id="email_btn">验证邮箱</button>
              <ul class="on_changes">
			<li email="">请选择邮箱类型</li>
            <li email=""></li>
			<li email="@sina.com"></li>
			<li email="@163.com"></li>
			<li email="@qq.com"></li>
			<li email="@hotmail.com"></li>
			<li email="@126.com"></li>
			<li email="@gmail.com"></li>
			<li email="@yahoo.com"></li>
		     </lu>
             </div>           
             </li>
         </ul>
        </div>
        </div>
   </div>
 </div>
</div>
  <script type="text/javascript">
  $(function(){
	$("#email").changeTips({
		divTip:".on_changes"
	}); 
})
			TouchSlide( { slideCell:"#Forgot_pass",

				endFun:function(i){ //高度自适应
					var bd = document.getElementById("order-bd");
					bd.parentNode.style.height = bd.children[i].children[0].offsetHeight+"px";
					if(i>0)bd.parentNode.style.transition="200ms";//添加动画效果
				}

			} );
  </script>
<script type="text/javascript">		
 jQuery(document).ready(function(){ 
 
 //初始化宽度、高度    
    $(".Forgot_Password").height($(window).height()); 
 $(".con").height($(window).height()-30); 
	$(".list").height($(window).height()-40); 
    //当文档窗口发生改变时 触发  
    $(window).resize(function(){
	$(".Forgot_Password").height($(window).height()); 
	 $(".con").height($(window).height()-30); 
	 $(".list").height($(window).height()-40); 
	});
  })
   var isMobile=/^1[3|4|5|8][0-9]\d{8}$/;
   var dianhua = $("#userCode").val();                 
  $("#verif_btn").click(function () {
	   if($("#userCode").val()===""){
	  
		layer.open({
         title: ['提示框','background-color:#8DCE16; color:#fff;'],
         content:('手机号不能为空'), 
		 btn: ['确认'], 
      });
	  return false
	  }
	  if(isMobile.test(dianhua)){
		     
		  layer.open({
			   title: ['提示框','background-color:#8DCE16; color:#fff;'],
               content:('电话号码错误'),
			   btn: ['确认'],
		  })
		  return false
		  }
	  else{		 
		  layer.open({
			   title: ['提示框','background-color:#8DCE16; color:#fff;'],
               content:('验证码发送'),
			   btn: ['确认'],
			   yes: function(index){		
		      	$(".verification_box").hide();
		        $(".Codes_Enter").show();
				$(".change_Password").hide();
			    layer.close(index);
					}
			 })		 
		  }	  
	  })
	  //下一步
	  	  $("#Next_btn").click(function () {
			  if($("#Codes").val()===""){
	  
		layer.open({
         title: ['提示框','background-color:#8DCE16; color:#fff;'],
         content:('验证码不能为空'), 
		 btn: ['确认'], 
      });
	  return false
	  }		
	    else{
			$(".verification_box").hide();
			$(".Codes_Enter").hide();
			$(".change_Password").show();
			}
	    });
		
	  /*邮箱密码找回**/
	  $("#email_btn").click(function () {
		   if($("#email").val()===""){
	  
		layer.open({
         title: ['提示框','background-color:#8DCE16; color:#fff;'],
         content:('邮箱不能为空'), 
		 btn: ['确认'], 
      });
	  return false
	  }
	  if (!$("#email").val().match(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/)) { 
	 layer.open({
         title: ['提示框','background-color:#8DCE16; color:#fff;'],
         content:('邮箱格式不正确'), 
		 btn: ['确认'], 
      });     
      return false; 
          } 
		  	  else{
		 
		  layer.open({
			   title: ['提示框','background-color:#8DCE16; color:#fff;'],
               content:('邮件已发送，请到电脑上完成操作！'),
			   btn: ['确认'],
			   yes: function(index){		
			    layer.close(index);
				location.href="user.html"; 
					}					
			  })		 
		  }	  
		  });
		  /**密码设置事件**/
		   $("#modify_btn").click(function () {
			   var num=0;
		   	  var str="";
		  $("input[type$='password']").each(function(n){
           if($(this).val()=="")
            {
               
			    layer.open({
                title: ['提示框','background-color:#8DCE16; color:#fff;'],			
			    content:(str+=""+$(this).attr("name")+"不能为空！\r\n"),	
			 	btn: ['确认'],	
          }); 
		     num++;
             return false;            
          } });
		  if(num>0)
           {
        
          return false;
          }
	  if(!$("#c_mew_pas").val || $("#c_mew_pas").val() != $("#Nes_pas").val() )
        {
            layer.open({ 
			   title: ['提示框','background-color:#8DCE16; color:#fff;'],
              content:('密码不一致，请重新输入！'),
			   btn: ['确认'],
			 });
			 return false;
        }   
          else{
			  
			  layer.open({
			   title: ['提示框','background-color:#8DCE16; color:#fff;'],
               content:('修改成功！'),
			   btn: ['确认'],
			   yes: function(index){		
			    layer.close(index);
				location.href="login.html"; 
					}					
			  })		
		  }	
			   
			   
			   })
 </script>
</body>
</html>
